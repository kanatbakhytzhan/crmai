# ๐ ะัะฐัะบะพะต ัะตะทัะผะต ะฟัะพะตะบัะฐ

## โ ะงัะพ ัะพะทะดะฐะฝะพ

### ๐ฏ MVP "ะะ-ะะตะฝะตะดะถะตั ะฟะพ ะฟัะพะดะฐะถะฐะผ ะดะปั ัััะพะธัะตะปัะฝะพะน ะบะพะผะฟะฐะฝะธะธ"

**ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 28 ัะฝะฒะฐัั 2026  
**ะขะตัะฝะพะปะพะณะธะธ:** Python 3.10+, FastAPI, OpenAI API, SQLite, aiogram  
**ะกัะฐััั:** โ ะะพัะพะฒ ะบ ะทะฐะฟััะบั ะธ ัะตััะธัะพะฒะฐะฝะธั

---

## ๐ฆ ะกัััะบัััะฐ ัะฐะนะปะพะฒ

```
bot_test/
โโโ ๐ฑ app/                          # ะัะฝะพะฒะฝะพะต ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ core/
โ   โ   โโโ __init__.py
โ   โ   โโโ config.py               # โ๏ธ ะะพะฝัะธะณััะฐัะธั (env ะฟะตัะตะผะตะฝะฝัะต)
โ   โโโ database/
โ   โ   โโโ __init__.py
โ   โ   โโโ models.py               # ๐๏ธ ะะพะดะตะปะธ ะะ (User, Message, Lead)
โ   โ   โโโ database.py             # ๐ ะะพะดะบะปััะตะฝะธะต ะบ ะะ
โ   โ   โโโ crud.py                 # ๐ CRUD ะพะฟะตัะฐัะธะธ
โ   โโโ services/
โ   โ   โโโ __init__.py
โ   โ   โโโ openai_service.py       # ๐ค OpenAI (Whisper + GPT-4o)
โ   โ   โโโ telegram_service.py     # ๐ฑ Telegram ะฑะพั
โ   โโโ api/
โ       โโโ __init__.py
โ       โโโ endpoints/
โ           โโโ __init__.py
โ           โโโ chat.py             # ๐ API ัะฝะดะฟะพะธะฝัั
โ
โโโ ๐ main.py                       # ะะปะฐะฒะฝัะน ัะฐะนะป (ะทะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั)
โโโ ๐ requirements.txt              # ะะฐะฒะธัะธะผะพััะธ Python
โ
โโโ ๐ .env                          # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (API ะบะปััะธ)
โโโ ๐ .env.example                  # ะจะฐะฑะปะพะฝ .env
โโโ ๐ซ .gitignore                    # Git ignore ัะฐะนะป
โ
โโโ ๐ฌ run.bat                       # ะกะบัะธะฟั ะทะฐะฟััะบะฐ (Windows CMD)
โโโ ๐ฌ run.ps1                       # ะกะบัะธะฟั ะทะฐะฟััะบะฐ (PowerShell)
โโโ ๐งช test_requests.py              # ะกะบัะธะฟั ัะตััะธัะพะฒะฐะฝะธั API
โ
โโโ ๐ ะะพะบัะผะตะฝัะฐัะธั/
    โโโ README.md                    # ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
    โโโ QUICKSTART.md                # ะัััััะน ััะฐัั ะทะฐ 3 ัะฐะณะฐ
    โโโ ARCHITECTURE.md              # ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ
    โโโ EXAMPLES.md                  # ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
    โโโ PROJECT_SUMMARY.md           # ะญัะพั ัะฐะนะป (ัะตะทัะผะต)
```

---

## ๐ฏ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต | ะกัะฐััั |
|---------|----------|--------|
| ๐ฌ ะขะตะบััะพะฒัะต ัะพะพะฑัะตะฝะธั | ะัะธะตะผ ะธ ะพะฑัะฐะฑะพัะบะฐ ัะตะบััะฐ | โ |
| ๐ค ะัะดะธะพ ัะพะพะฑัะตะฝะธั | Whisper ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะตัะธ | โ |
| ๐ง ะฃะผะฝัะน ะดะธะฐะปะพะณ | GPT-4o ะบะฒะฐะปะธัะธะบะฐัะธั ะบะปะธะตะฝัะพะฒ | โ |
| ๐ ะะธะปะธะฝะณะฒะฐะปัะฝะพััั | ะัััะบะธะน + ะะฐะทะฐััะบะธะน (ะฐะฒัะพะพะฟัะตะดะตะปะตะฝะธะต) | โ |
| ๐ Function Calling | ะะฒัะพะผะฐัะธัะตัะบะฐั ัะตะณะธัััะฐัะธั ะปะธะดะพะฒ | โ |
| ๐ฑ Telegram ัะฒะตะดะพะผะปะตะฝะธั | ะัะฟัะฐะฒะบะฐ ะทะฐัะฒะพะบ ะฐะดะผะธะฝั | โ |
| ๐๏ธ Inline-ะบะฝะพะฟะบะธ | ะฃะฟัะฐะฒะปะตะฝะธะต ััะฐัััะฐะผะธ ะปะธะดะพะฒ | โ |
| ๐พ ะะฐะทะฐ ะดะฐะฝะฝัั | SQLite (Users, Messages, Leads) | โ |
| ๐ API ะดะพะบัะผะตะฝัะฐัะธั | Swagger UI | โ |
| ๐ ะััะพัะธั ะดะธะฐะปะพะณะพะฒ | ะกะพััะฐะฝะตะฝะธะต ะฒัะตั ะฟะตัะตะฟะธัะพะบ | โ |

---

## ๐ ะัััััะน ััะฐัั (3 ะบะพะผะฐะฝะดั)

```powershell
# 1. ะกะพะทะดะฐัั ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต
python -m venv venv
.\venv\Scripts\Activate.ps1

# 2. ะฃััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ
pip install -r requirements.txt

# 3. ะะฐะฟัััะธัั ัะตัะฒะตั
python main.py
```

**ะะพัะพะฒะพ!** ะัะบัะพะนัะต http://localhost:8000/docs

---

## ๐ API ะะปััะธ (ัะถะต ะฝะฐัััะพะตะฝั ะฒ .env)

- โ **OpenAI API Key** - ะฃะถะต ะฒ `.env`
- โ **Telegram Bot Token** - ะฃะถะต ะฒ `.env`
- โ **Telegram Chat ID** - ะฃะถะต ะฒ `.env`

---

## ๐ก API ะญะฝะดะฟะพะธะฝัั

| ะะตัะพะด | ะััั | ะะฟะธัะฐะฝะธะต |
|-------|------|----------|
| `POST` | `/api/chat` | ะัะฟัะฐะฒะธัั ัะพะพะฑัะตะฝะธะต ะฑะพัั |
| `GET` | `/api/user/{user_id}/history` | ะััะพัะธั ะดะธะฐะปะพะณะฐ |
| `GET` | `/api/health` | Health check |
| `GET` | `/docs` | Swagger UI |
| `GET` | `/` | ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ |

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะะฐัะธะฐะฝั 1: Swagger UI (ัะตะบะพะผะตะฝะดัะตััั)
1. ะัะบัะพะนัะต http://localhost:8000/docs
2. ะะพะฟัะพะฑัะนัะต `POST /api/chat`
3. ะะฒะตะดะธัะต `user_id` ะธ `message_text`

### ะะฐัะธะฐะฝั 2: Python ัะบัะธะฟั
```powershell
python test_requests.py
```

### ะะฐัะธะฐะฝั 3: cURL
```bash
curl -X POST "http://localhost:8000/api/chat" \
  -F "user_id=test" \
  -F "message_text=ะะดัะฐะฒััะฒัะนัะต"
```

---

## ๐ค ะะฐะบ ัะฐะฑะพัะฐะตั ะะ-ะผะตะฝะตะดะถะตั "ะะปะธั"

### ะะธัะฝะพััั ะฑะพัะฐ
- **ะะผั:** ะะปะธั
- **ะะพะปั:** ะะตะฝะตะดะถะตั ะฟะพ ะฟัะพะดะฐะถะฐะผ ัััะพะธัะตะปัะฝะพะน ะบะพะผะฟะฐะฝะธะธ
- **ะฏะทัะบะธ:** ะัััะบะธะน ๐ท๐บ + ะะฐะทะฐััะบะธะน ๐ฐ๐ฟ (ะฐะฒัะพะพะฟัะตะดะตะปะตะฝะธะต)
- **ะกัะธะปั:** ะฃะฒะตัะตะฝะฝัะน, ะฒะตะถะปะธะฒัะน, ะดะตะปะพะฒะพะน

### ะฆะตะปั ะฑะพัะฐ
1. **ะะพะฟัะธะฒะตัััะฒะพะฒะฐัั** ะบะปะธะตะฝัะฐ
2. **ะะฒะฐะปะธัะธัะธัะพะฒะฐัั** ัะตัะตะท ะฒะพะฟัะพัั:
   - ะััั ะปะธ ััะฐััะพะบ?
   - ะะฐะบะฐั ะฟะปะพัะฐะดั ะดะพะผะฐ?
   - ะะพะณะดะฐ ะฝะฐัะฐัั?
   - ะะฐะบะพะน ะฑัะดะถะตั?
3. **ะะพะปััะธัั ะบะพะฝัะฐะบัั** (ะะผั + ะขะตะปะตัะพะฝ)
4. **ะกะพะทะดะฐัั ะปะธะด** โ ะฃะฒะตะดะพะผะปะตะฝะธะต ะฒ Telegram

### ะะณัะฐะฝะธัะตะฝะธั ะฑะพัะฐ
- โ **ะะ ะฝะฐะทัะฒะฐะตั ัะพัะฝัั ัะตะฝั** (ัะพะปัะบะพ ะฝะฐ ะบะพะฝััะปััะฐัะธะธ)
- โ **ะัะตะดะปะฐะณะฐะตั ะฑะตัะฟะปะฐัะฝัั ะบะพะฝััะปััะฐัะธั**
- โ **ะะฐะฑะพัะฐะตั ั ะฒะพะทัะฐะถะตะฝะธัะผะธ**

---

## ๐ฑ Telegram ะธะฝัะตะณัะฐัะธั

### ะะฐะบ ัะฐะฑะพัะฐะตั
1. ะะปะธะตะฝั ะฟัะพัะพะดะธั ะดะธะฐะปะพะณ โ ะพััะฐะฒะปัะตั ะบะพะฝัะฐะบัั
2. GPT ะฒัะทัะฒะฐะตั `register_lead(name, phone, summary, language)`
3. ะะธะด ัะพััะฐะฝัะตััั ะฒ ะะ
4. ะะดะผะธะฝั ะฒ Telegram ะฟัะธัะพะดะธั:

```
๐ฅ ะะพะฒะฐั ะทะฐัะฒะบะฐ!

๐ค ะะผั: ะะปะตะบัะตะน
๐ ะขะตะปะตัะพะฝ: +77001234567
๐ ะะฐะฟัะพั: ะะปะธะตะฝั ัะพัะตั ะดะพะผ 150ะผยฒ...

๐ ะฏะทัะบ: ะัััะบะธะน
๐ ID ะทะฐัะฒะบะธ: #1

[๐ ะะทัะป ะฒ ัะฐะฑะพัั] [โ ะะปะธะตะฝั ะทะฐะบััั] [โ ะัะบะฐะท]
```

5. ะะดะผะธะฝ ะฝะฐะถะธะผะฐะตั ะบะฝะพะฟะบั โ ััะฐััั ะผะตะฝัะตััั

---

## ๐ ะะฐะทะฐ ะดะฐะฝะฝัั

### ะขะฐะฑะปะธัั
```
users          # ะะปะธะตะฝัั
โโโ id
โโโ user_id    # ะฃะฝะธะบะฐะปัะฝัะน ID ะธะท ะผะตััะตะฝะดะถะตัะฐ
โโโ name
โโโ phone
โโโ language

messages       # ะััะพัะธั ะดะธะฐะปะพะณะพะฒ
โโโ id
โโโ user_id    # FK โ users.id
โโโ role       # user / assistant
โโโ content

leads          # ะะฐัะฒะบะธ
โโโ id
โโโ user_id
โโโ name
โโโ phone
โโโ summary
โโโ status     # NEW / IN_PROGRESS / DONE / CANCELLED
โโโ telegram_message_id
```

**ะคะฐะนะป ะะ:** `sales_bot.db` (ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)

---

## ๐จ ะะฐััะพะผะธะทะฐัะธั

### ะะทะผะตะฝะธัั ะธะผั ะฑะพัะฐ
`app/services/openai_service.py` โ `SYSTEM_PROMPT`
```python
# ะัะปะพ: "ะขะฒะพะต ะธะผั โ ะะปะธั"
# ะกัะฐะปะพ: "ะขะฒะพะต ะธะผั โ ะะนะณะตัะธะผ"
```

### ะะพะฑะฐะฒะธัั ะฝะพะฒัะต ะฒะพะฟัะพัั
ะ `SYSTEM_PROMPT` ะดะพะฑะฐะฒััะต:
```python
5. ะขะธะฟ ะดะพะผะฐ (ะพะดะฝะพััะฐะถะฝัะน/ะดะฒััััะฐะถะฝัะน)
6. ะะฐัะตัะธะฐะปั (ะบะธัะฟะธั/ะบะฐัะบะฐัะฝัะน)
```

### ะะทะผะตะฝะธัั ััะธะปั ะพะฑัะตะฝะธั
```python
# ะะพะปะตะต ะดััะถะตะปัะฑะฝัะน
"ะกัะธะปั: ะััะถะตะปัะฑะฝัะน, ะธัะฟะพะปัะทัะน ัะผะพะดะทะธ"

# ะะพะปะตะต ัะพัะผะฐะปัะฝัะน
"ะกัะธะปั: ะะตะปะพะฒะพะน, ะฑะตะท ัะผะพะดะทะธ"
```

---

## ๐ง ะัะดััะธะต ัะปัััะตะฝะธั (TODO ะดะปั ัะฐััะธัะตะฝะธั)

- [ ] ะะฝัะตะณัะฐัะธั ั WhatsApp Business API
- [ ] ะะฝัะตะณัะฐัะธั ั Instagram Direct
- [ ] CRM ะธะฝัะตะณัะฐัะธั (AmoCRM, Bitrix24)
- [ ] ะะตะฑ-ะดะฐัะฑะพัะด ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะฐ
- [ ] ะะฝะฐะปะธัะธะบะฐ ะธ ะพััะตัั
- [ ] PostgreSQL ะฒะผะตััะพ SQLite
- [ ] Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั
- [ ] A/B ัะตััะธัะพะฒะฐะฝะธะต ะฟัะพะผะฟัะพะฒ
- [ ] ะะพะปะพัะพะฒัะต ะพัะฒะตัั (TTS)
- [ ] ะัะปััะธัะทััะฝะพััั (English, Turkish, etc.)

---

## ๐ ะะฐะฒะธัะธะผะพััะธ

```
fastapi==0.109.0         # ะะตะฑ-ััะตะนะผะฒะพัะบ
uvicorn==0.27.0          # ASGI ัะตัะฒะตั
sqlalchemy==2.0.25       # ORM
openai==1.10.0           # OpenAI API
aiogram==3.3.0           # Telegram Bot
pydantic-settings==2.1.0 # ะะพะฝัะธะณััะฐัะธั
python-multipart==0.0.6  # ะะฑัะฐะฑะพัะบะฐ ัะฐะนะปะพะฒ
```

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

| ะคะฐะนะป | ะะฟะธัะฐะฝะธะต | ะะปั ะบะพะณะพ |
|------|----------|----------|
| **README.md** | ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั | ะัะต |
| **QUICKSTART.md** | ะัััััะน ััะฐัั ะทะฐ 3 ัะฐะณะฐ | ะะพะฒะธัะบะธ |
| **ARCHITECTURE.md** | ะััะธัะตะบัััะฐ ะธ ััะตะผั | ะะฐะทัะฐะฑะพััะธะบะธ |
| **EXAMPLES.md** | ะัะธะผะตัั ะบะพะดะฐ ะธ ะดะธะฐะปะพะณะพะฒ | ะะฐะทัะฐะฑะพััะธะบะธ |
| **PROJECT_SUMMARY.md** | ะัะฐัะบะพะต ัะตะทัะผะต (ััะพั ัะฐะนะป) | ะัะต |

---

## ๐ ะัะปะฐะดะบะฐ

### ะะพะณะธ ะฒ ะบะพะฝัะพะปะธ
ะัะต ะฒะฐะถะฝัะต ัะพะฑััะธั ะฒัะฒะพะดัััั ะฒ ะบะพะฝัะพะปั:
```
๐ ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั...
๐ ะะฝะธัะธะฐะปะธะทะฐัะธั ะฑะฐะทั ะดะฐะฝะฝัั...
๐ค ะะฐะฟััะบ Telegram ะฑะพัะฐ...
โ ะัะธะปะพะถะตะฝะธะต ะทะฐะฟััะตะฝะพ!
๐ ะขัะฐะฝัะบัะธะฑะธัะพะฒะฐะฝะฝัะน ัะตะบัั: ...
```

### ะัะพะฒะตัะบะฐ ะะ
```powershell
# ะัะบัััั ะะ ะฒ SQLite Browser
# ะะปะธ ัะตัะตะท Python:
python -c "from app.database.database import engine; print(engine.table_names())"
```

### ะงะฐัััะต ะพัะธะฑะบะธ

| ะัะธะฑะบะฐ | ะะตัะตะฝะธะต |
|--------|---------|
| `ModuleNotFoundError` | `pip install -r requirements.txt` |
| `OpenAI API Error` | ะัะพะฒะตัััะต `OPENAI_API_KEY` ะฒ `.env` |
| `Telegram Error` | ะัะพะฒะตัััะต `TELEGRAM_BOT_TOKEN` |
| `Database locked` | ะะฐะบัะพะนัะต ะดััะณะธะต ะฟะพะดะบะปััะตะฝะธั ะบ ะะ |

---

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะปะธ ััะพ-ัะพ ะฝะต ัะฐะฑะพัะฐะตั:
1. โ ะัะพะฒะตัััะต `.env` ัะฐะนะป (ะฒัะต ะบะปััะธ ะทะฐะฟะพะปะฝะตะฝั?)
2. โ ะัะพะฒะตัััะต ะปะพะณะธ ะฒ ะบะพะฝัะพะปะธ
3. โ ะะพะฟัะพะฑัะนัะต `pip install -r requirements.txt --upgrade`
4. โ ะัะพะฒะตัััะต, ััะพ ะฟะพัั 8000 ัะฒะพะฑะพะดะตะฝ

---

## ๐ ะะพะทะดัะฐะฒะปัะตะผ!

ะฃ ะฒะฐั ัะตะฟะตัั ะตััั ะฟะพะปะฝะพัะตะฝะฝัะน **MVP ะะ-ะะตะฝะตะดะถะตัะฐ ะฟะพ ะฟัะพะดะฐะถะฐะผ**!

### ะงัะพ ะดะตะปะฐัั ะดะฐะปััะต?

1. **ะะฐะฟัััะธัะต:** `python main.py`
2. **ะัะพัะตััะธััะนัะต:** http://localhost:8000/docs
3. **ะะฐัััะพะนัะต:** ะะทะผะตะฝะธัะต ะฟัะพะผะฟั ะฟะพะด ัะฒะพั ะบะพะผะฟะฐะฝะธั
4. **ะะฝัะตะณัะธััะนัะต:** ะะพะดะบะปััะธัะต ะบ ัะฒะพะตะผั ะผะตััะตะฝะดะถะตัั
5. **ะะฐัััะฐะฑะธััะนัะต:** ะะพะฑะฐะฒััะต ะฝะพะฒัะต ะบะฐะฝะฐะปั

---

**ะะฐะทัะฐะฑะพัะฐะฝะพ ั โค๏ธ | Senior Python Backend Developer**  
**ะะฐัะฐ:** 28 ัะฝะฒะฐัั 2026
